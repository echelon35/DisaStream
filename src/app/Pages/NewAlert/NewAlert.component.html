<!-- <app-stepper style="position: absolute;top:0;z-index:11; width: 100%;" [steps]="steps" [isClickable]="false"></app-stepper> -->
<!-- <app-new-area id="where-step" [loadingAlert]="loadedAlert.asObservable()" (areaChange)="areaAlert($event)" (completeStep)="completeStep($event)"></app-new-area>
<app-alea-types id="alea-step" style="display:none;" [loadingAlert]="loadedAlert.asObservable()" (aleaChange)="selectAleas($event)" (completeStep)="completeStep($event)"></app-alea-types>
<app-add-mail-alerts id="mail-step" style="display:none;" [loadingAlert]="loadedAlert.asObservable()" (mailAlertsChange)="addMails($event)" (completeStep)="completeStep($event)"></app-add-mail-alerts>

<div id="final-step" class="final-screen" style="display:none;">
  <form [formGroup]="formGroup">
    <div class="end-form">
      <h1 class="w-600 margin-b20">Donnez un nom à votre alerte</h1>
      <div class="pc-flex align-items-center">
        <input [ngModel]="this.alert.name" formControlName="name" required class="input-alert" type="text" placeholder="Nom de votre alerte" />
        <button class="lg-btn btn-primary" (click)="createAlert()">J'ai terminé</button>
      </div>
      <input [ngModel]="this.alert.name" formControlName="name" required class="input-alert mobile-block margin-10" type="text" placeholder="Nom de votre alerte" />
    </div>
  </form>
  <div class="next-step tertiary-bg d-flex justify-content-between align-items-center margin-b20 padding-l40 padding-r40">
    <button (click)="completeStep('mail-step')" class="btn-primary btn-icon lg-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-square-arrow-left"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="m12 8-4 4 4 4"/><path d="M16 12H8"/></svg>
        <span class="margin-l10 pc-block">Choisir des mails</span>
    </button>
    <button (click)="createAlert()" class="btn-primary btn-icon lg-btn">
        <span class="margin-r10 pc-block">Finaliser</span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-check"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
    </button>
</div>
</div> -->

<div id="map-new-area" class="w-full h-full">
  <app-map [displayLayers]="false" [displayZoom]="false" [mapId]="'map-new-area'" (map$)="receiveMap($event)" (layer$)="receiveLayer($event)" [layerPrincipal]="'Disaster'" [scrollZoom]="true" [locationBox]="locationBox"></app-map>
</div>
<button [class.opacity-0]="panelVisible" [class.opacity-100]="!panelVisible" (click)="showPanel()" class="z-999 absolute top-20 right-0 inline-flex items-center rounded-l-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-10 transform transition ease-in-out duration-500 ">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left-to-line"><path d="M3 19V5"/><path d="m13 6-6 6 6 6"/><path d="M7 12h14"/></svg>
</button>
<div class="relative z-999" aria-labelledby="slide-over-title" role="dialog" aria-modal="true">
  <!-- Background backdrop, show/hide based on slide-over state. -->
  <!-- <div class="fixed inset-0"></div> -->
  <div
  [class.translate-x-full]="!panelVisible"
  [class.translate-x-0]="panelVisible"
  class="pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10 sm:pl-16 transform transition ease-in-out duration-500 sm:duration-700">
    <div class="pointer-events-auto w-screen max-w-2xl">
      <form class="flex h-full flex-col overflow-y-scroll bg-white shadow-xl">
        <div class="flex-1">
          <!-- Header -->
          <div class="bg-gray-50 px-4 py-6 sm:px-6">
            <div class="flex items-start justify-between space-x-3">
              <div class="space-y-1">
                <h2 class="text-base font-semibold text-gray-900" id="slide-over-title">New alert</h2>
                <p class="text-sm text-gray-500">Create new alert by chosing the area and aleas you want to monitor.</p>
              </div>
              <div class="flex h-7 items-center">
                <button (click)="showPanel()" type="button" class="relative text-gray-400 hover:text-gray-500">
                  <span class="absolute -inset-2.5"></span>
                  <span class="sr-only">Close panel</span>
                  <svg class="size-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 5v14"/><path d="M21 12H7"/><path d="m15 18 6-6-6-6"/></svg>
                </button>
              </div>
            </div>
          </div>

          <!-- Divider container -->
          <div class="space-y-6 py-6 sm:space-y-0 sm:divide-y sm:divide-gray-200 sm:py-0">
            <!-- Alert name -->
            <div class="space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5">
              <div>
                <label for="project-name" class="block text-sm/6 font-medium text-gray-900 sm:mt-1.5">Alert name</label>
              </div>
              <div class="sm:col-span-2">
                <input type="text" name="project-name" id="project-name" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm/6">
              </div>
            </div>

            <div class="space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5">
              <label class="block text-sm/6 font-medium text-gray-900 sm:mt-1.5">Area (default world)</label>
              <div class="sm:col-span-2">
                <div *ngIf="this.selectedLayer != null" class="flex items-center text-blue-500 cursor-pointer hover:text-blue-400">
                  <svg class="size-6" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.54 15H17a2 2 0 0 0-2 2v4.54"/><path d="M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17"/><path d="M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05"/><circle cx="12" cy="12" r="10"/></svg>
                  <p (click)="drawPolygon()" class="text-sm ml-3">
                    Want to monitor a specific area ? Click here and draw area on the map
                  </p>
                </div>
              </div>
            </div>

            <!-- Project description -->
            <div class="space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5">
              <div>
                <label for="project-description" class="block text-sm/6 font-medium text-gray-900 sm:mt-1.5">Aléas</label>
              </div>
              <div class="sm:col-span-2">
                <app-alea-types id="alea-step" [loadingAlert]="loadedAlert.asObservable()" (aleaChange)="selectAleas($event)" ></app-alea-types>
              </div>
            </div>

            <!-- Team members -->
            <div class="space-y-2 px-4 sm:grid sm:grid-cols-3 sm:items-center sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5">
              <div>
                <h3 class="text-sm/6 font-medium text-gray-900">Team Members to alert</h3>
              </div>
              <div class="sm:col-span-2">
                <div class="flex space-x-2">
                  <a href="#" class="shrink-0 rounded-full hover:opacity-75">
                    <img class="inline-block size-8 rounded-full" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="Tom Cook">
                  </a>
                  <button type="button" class="relative inline-flex size-8 shrink-0 items-center justify-center rounded-full border-2 border-dashed border-gray-200 bg-white text-gray-400 hover:border-gray-300 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                    <span class="absolute -inset-2"></span>
                    <span class="sr-only">Add team member</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                      <path d="M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z" />
                    </svg>
                  </button>
                </div>
              </div>
            </div>

            <!-- Privacy -->
            <fieldset class="space-y-2 px-4 sm:grid sm:grid-cols-3 sm:items-start sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5">
              <legend class="sr-only">Privacy</legend>
              <div class="text-sm/6 font-medium text-gray-900" aria-hidden="true">Privacy</div>
              <div class="space-y-5 sm:col-span-2">
                <div class="space-y-5 sm:mt-0">
                  <div class="relative flex items-start">
                    <div class="absolute flex h-6 items-center">
                      <input id="public-access" name="privacy" aria-describedby="public-access-description" type="radio" class="size-4 border-gray-300 text-indigo-600 focus:ring-indigo-600" checked>
                    </div>
                    <div class="pl-7 text-sm/6">
                      <label for="public-access" class="font-medium text-gray-900">Public access</label>
                      <p id="public-access-description" class="text-gray-500">Everyone with the link will see this project</p>
                    </div>
                  </div>
                  <div class="relative flex items-start">
                    <div class="absolute flex h-6 items-center">
                      <input id="restricted-access" name="privacy" aria-describedby="restricted-access-description" type="radio" class="size-4 border-gray-300 text-indigo-600 focus:ring-indigo-600">
                    </div>
                    <div class="pl-7 text-sm/6">
                      <label for="restricted-access" class="font-medium text-gray-900">Private to Project Members</label>
                      <p id="restricted-access-description" class="text-gray-500">Only members of this project would be able to access</p>
                    </div>
                  </div>
                  <div class="relative flex items-start">
                    <div class="absolute flex h-6 items-center">
                      <input id="private-access" name="privacy" aria-describedby="private-access-description" type="radio" class="size-4 border-gray-300 text-indigo-600 focus:ring-indigo-600">
                    </div>
                    <div class="pl-7 text-sm/6">
                      <label for="private-access" class="font-medium text-gray-900">Private to you</label>
                      <p id="private-access-description" class="text-gray-500">You are the only one able to access this project</p>
                    </div>
                  </div>
                </div>
                <hr class="border-gray-200">
                <div class="flex flex-col items-start space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0">
                  <div>
                    <a href="#" class="group flex items-center space-x-2.5 text-sm font-medium text-indigo-600 hover:text-indigo-900">
                      <svg class="size-5 text-indigo-500 group-hover:text-indigo-900" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                        <path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z" />
                        <path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z" />
                      </svg>
                      <span>Copy link</span>
                    </a>
                  </div>
                  <div>
                    <a href="#" class="group flex items-center space-x-2.5 text-sm text-gray-500 hover:text-gray-900">
                      <svg class="size-5 text-gray-400 group-hover:text-gray-500" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0ZM8.94 6.94a.75.75 0 1 1-1.061-1.061 3 3 0 1 1 2.871 5.026v.345a.75.75 0 0 1-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 1 0 8.94 6.94ZM10 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" clip-rule="evenodd" />
                      </svg>
                      <span>Learn more about sharing</span>
                    </a>
                  </div>
                </div>
              </div>
            </fieldset>
          </div>
        </div>

        <!-- Action buttons -->
        <div class="shrink-0 border-t border-gray-200 px-4 py-5 sm:px-6">
          <div class="flex justify-end space-x-3">
            <button type="button" class="rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">Cancel</button>
            <button type="submit" class="inline-flex justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Create</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
