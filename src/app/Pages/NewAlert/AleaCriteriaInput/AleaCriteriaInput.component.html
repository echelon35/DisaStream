<div *ngIf="criteria.length > 0" class="space-y-4">
  <div>
    <h3 class="text-sm font-medium text-gray-900 mb-2">Critères d'alerte (optionnel)</h3>
    <p class="text-xs text-gray-500 mb-3">Définissez des critères spécifiques pour affiner vos alertes</p>
  </div>

  <div *ngFor="let criteriaItem of criteria" class="border border-gray-200 rounded-md p-4 bg-gray-50">
    <h4 class="text-sm font-medium text-gray-700 mb-3">{{ getCriteriaLabel(criteriaItem) }}</h4>

    <!-- Earthquake Criteria -->
    <div *ngIf="isEarthquakeCriteria(criteriaItem)">
      <div class="space-y-3">
        <!-- Magnitude Filter -->
        <div class="flex items-center gap-2">
          <label class="text-sm text-gray-600 w-24">Magnitude</label>
          <select
            [value]="criteriaItem.magnitude?.operator || 'gt'"
            (change)="onMagnitudeOperatorChange(criteriaItem, $any($event.target).value)"
            class="rounded-md border-gray-300 text-sm focus:ring-indigo-500 focus:border-indigo-500 w-20">
            <option *ngFor="let op of operatorOptions" [value]="op.value">{{ op.label }}</option>
          </select>
          <input
            type="number"
            step="0.1"
            min="0"
            max="10"
            [value]="criteriaItem.magnitude?.value || ''"
            (input)="onMagnitudeValueChange(criteriaItem, $any($event.target).value)"
            placeholder="Ex: 5.0"
            class="rounded-md border-gray-300 text-sm focus:ring-indigo-500 focus:border-indigo-500 w-28">
          <button
            *ngIf="criteriaItem.magnitude"
            (click)="clearMagnitude(criteriaItem)"
            type="button"
            class="text-gray-400 hover:text-gray-600">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Flood Criteria -->
    <div *ngIf="isFloodCriteria(criteriaItem)">
      <div class="space-y-3">
        <!-- Level Filter -->
        <div class="flex items-center gap-2">
          <label class="text-sm text-gray-600 w-24">Niveau</label>
          <select
            [value]="criteriaItem.level?.operator || 'gt'"
            (change)="onFloodLevelOperatorChange(criteriaItem, $any($event.target).value)"
            class="rounded-md border-gray-300 text-sm focus:ring-indigo-500 focus:border-indigo-500 w-20">
            <option *ngFor="let op of operatorOptions" [value]="op.value">{{ op.label }}</option>
          </select>
          <input
            type="number"
            step="0.1"
            min="0"
            [value]="criteriaItem.level?.value || ''"
            (input)="onFloodLevelValueChange(criteriaItem, $any($event.target).value)"
            placeholder="Ex: 1.0"
            class="rounded-md border-gray-300 text-sm focus:ring-indigo-500 focus:border-indigo-500 w-28">
          <button
            *ngIf="criteriaItem.level"
            (click)="clearFloodLevel(criteriaItem)"
            type="button"
            class="text-gray-400 hover:text-gray-600">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
